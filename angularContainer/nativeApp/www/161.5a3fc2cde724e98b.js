"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[161],{2161:(U,h,n)=>{n.r(h),n.d(h,{VenuePage:()=>B});var v=n(177),_=n(4341),c=n(367),u=n(7192),e=n(3953),m=n(5873),g=n(5079),p=n(3536),E=n(3129),f=n(508),d=n(8986),D=n(2490),I=n(1885),P=n(8880);function k(o,r){return this.eventsList}const y=o=>({color:o});function O(o,r){if(1&o&&(e.j41(0,"div")(1,"ion-title"),e.EFF(2),e.k0s()()),2&o){const l=e.XpG();e.R7$(2),e.SpI("Events at ",l.venueName,"")}}function M(o,r){1&o&&(e.j41(0,"ion-title"),e.EFF(1,"Events"),e.k0s())}function T(o,r){if(1&o){const l=e.RV6();e.j41(0,"ion-item",12)(1,"div",14),e.bIt("click",function(){const s=e.eBV(l).$implicit,i=e.XpG();return e.Njj(i.openEventMenu(s.id))}),e.EFF(2),e.k0s(),e.j41(3,"div",15)(4,"ion-button",16,1),e.bIt("click",function(){const s=e.eBV(l).$implicit,i=e.XpG();return e.Njj(i.saveEvent(s.id))}),e.nrm(6,"ion-icon",17),e.k0s(),e.j41(7,"ion-button",18),e.EFF(8," Get Tickets "),e.k0s()()()}if(2&o){const l=r.$implicit,t=e.XpG();e.R7$(2),e.SpI(" ",l.name," "),e.R7$(2),e.HbH(l.id),e.R7$(2),e.Y8G("ngStyle",e.eq3(5,y,t.activatedBtn.includes(l.id)?"white":"black"))}}let B=(()=>{var o;class r{constructor(t,s,i,a,S){this.route=t,this.router=s,this.cookieService=i,this.isSaved=a,this.platform=S,this.FindEvents=(0,e.WQX)(u.h),this.EventsDetails=(0,e.WQX)(p.q),this.UiUxService=(0,e.WQX)(E.x),this.Navhome=(0,e.WQX)(f.P),this.isToastOpen=!1}ngOnInit(){(0,g.a)({heart:m.Hmd}),this.activatedBtn=[],this.venueId=this.route.snapshot.queryParams.venueId,this.venueName=this.route.snapshot.queryParams.venueName?this.route.snapshot.queryParams.venueName:this.route.snapshot.queryParams.venueNameMap,this.FindEvents.getVenuesEvents({venueId:this.venueId}).subscribe(t=>{console.log(t),this.eventsList=t.venueEvents}),this.UiUxService.getMyId({myCookie:this.cookieService.get("myCookie")}).subscribe(t=>{console.log(t),this.userId=t.userId,this.EventsDetails.getSavedEvents({myCookie:t.userId}).subscribe(s=>{console.log(s);for(let i=0;i<s.length;i++)console.log(s[i].eventId),this.activatedBtn.push(s[i].eventId)})})}ionViewWillEnter(){this.activatedBtn=[],console.log(this.isSaved.comingFromPageEvents),this.isSaved.comingFromPageEvents&&this.UiUxService.getMyId({myCookie:this.cookieService.get("myCookie")}).subscribe(t=>{console.log(t),this.EventsDetails.getSavedEvents({myCookie:t.userId}).subscribe(s=>{console.log(s);for(let i=0;i<s.length;i++)console.log(s[i].eventId),this.activatedBtn.push(s[i].eventId),this.isSaved.comingFromPageEvents=!1})})}openEventMenu(t){this.router.navigate(["/event"],{queryParams:{eventId:t}})}saveEvent(t){if(this.activatedBtn.includes(t)){const s=this.activatedBtn.indexOf(t);s>-1&&this.activatedBtn.splice(s,1),this.UiUxService.getMyId({myCookie:this.cookieService.get("myCookie")}).subscribe(i=>{console.log(i),this.EventsDetails.removeEvent({eventId:t,userId:i.userId,venueId:this.venueId}).subscribe(a=>{console.log(a)})})}else this.activatedBtn.push(t),this.UiUxService.getMyId({myCookie:this.cookieService.get("myCookie")}).subscribe(s=>{console.log(s),this.EventsDetails.getEventDetails({eventId:t}).subscribe(i=>{console.log(i),this.eventDetails=i.venueEvents[0],console.log(this.eventDetails),console.log("************************"),this.eventName=this.eventDetails.name,this.eventImages=this.eventDetails.images[0].url,this.eventTickets=this.eventDetails.url,this.eventId=this.eventDetails.id,this.venueId=this.eventDetails._embedded.venues[0].id,this.eventStartDate=this.formatDate(this.eventDetails.dates.start.localDate).toString().replace(/(^|-)0+/g,"$1"),console.log(this.eventDetails.dates.start.localTime.slice(0,5).toString()),this.eventStartTime=this.convertTo12Hour(this.eventDetails.dates.start.localTime.slice(0,5).toString()),console.log(this.eventStartTime),this.EventsDetails.saveEvent({eventId:t,userId:this.userId,venueId:this.venueId,eventName:this.eventName,eventImage:this.eventImages,eventStartDt:this.eventStartDate,eventStartTm:this.eventStartTime,eventTickets:this.eventTickets}).subscribe(a=>{console.log(a)})})}),this.setOpen(!0)}setOpen(t){this.isToastOpen=t}formatDate(t){const[s,i,a]=t.split("-");return`${i}/${a}/${s}`}convertTo12Hour(t){let[s,i]=t.split(":");console.log(s,i);let a="AM";return s>=12&&(a="PM",s>12&&(s-=12)),`${s}:${i} ${a}`}clickedVenueBackBtn(){this.Navhome.navHome=!0}}return(o=r).\u0275fac=function(t){return new(t||o)(e.rXU(d.nX),e.rXU(d.Ix),e.rXU(D.O),e.rXU(I.W),e.rXU(P.OD))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-venue"]],standalone:!0,features:[e.aNF],decls:24,vars:4,consts:[["templateName",""],["heartBtn",""],["rel","preconnect","href",e.wXG`https://fonts.googleapis.com`],["rel","preconnect","href",e.wXG`https://fonts.gstatic.com`,"crossorigin",""],["href",e.wXG`https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap`,"rel","stylesheet"],["href",e.wXG`https://fonts.googleapis.com/css2?family=Libre+Franklin:ital,wght@0,100..900;1,100..900&family=Quicksand:wght@300..700&display=swap`,"rel","stylesheet"],["href",e.wXG`https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,100..900;1,100..900&display=swap`,"rel","stylesheet"],["slot","start",3,"click"],["color","success"],[4,"ngIf","ngIfElse"],["slot","end",2,"margin-right","10px"],["id","main-content",1,"flex-center"],[1,"eventsList"],["message","Event Saved","color","light",3,"didDismiss","isOpen","duration"],[1,"ion-padding",2,"width","60%",3,"click"],[1,"ion-padding",2,"float","right","display","flex","flex-direction","row","align-items","center","justify-content","center","padding-left","1rem"],["color","success","shape","round",3,"click"],["slot","icon-only","name","heart",3,"ngStyle"],["color","success","size","small",2,"width","25vw"]],template:function(t,s){if(1&t){const i=e.RV6();e.j41(0,"head"),e.nrm(1,"link",2)(2,"link",3)(3,"link",4)(4,"link",2)(5,"link",3)(6,"link",5)(7,"link",2)(8,"link",3)(9,"link",6),e.k0s(),e.j41(10,"ion-header")(11,"ion-toolbar")(12,"ion-buttons",7),e.bIt("click",function(){return e.eBV(i),e.Njj(s.clickedVenueBackBtn())}),e.nrm(13,"ion-back-button",8),e.k0s(),e.DNE(14,O,3,1,"div",9)(15,M,2,0,"ng-template",null,0,e.C5r),e.j41(17,"ion-buttons",10),e.nrm(18,"ion-menu-button",8),e.k0s()()(),e.j41(19,"div",11)(20,"ion-content"),e.Z7z(21,T,9,7,"ion-item",12,k,!0),e.j41(23,"ion-toast",13),e.bIt("didDismiss",function(){return e.eBV(i),e.Njj(s.setOpen(!1))}),e.k0s()()()}if(2&t){const i=e.sdS(16);e.R7$(14),e.Y8G("ngIf",s.venueName)("ngIfElse",i),e.R7$(7),e.Dyx(s.eventsList),e.R7$(2),e.Y8G("isOpen",s.isToastOpen)("duration",3e3)}},dependencies:[c.W9,c.eU,c.BC,c.ai,v.MD,v.bT,v.B3,_.YN,c.uz,c.QW,c.el,c.Jm,c.iq,c.op,c.MC],styles:[".eventsList[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between}"]}),r})()}}]);