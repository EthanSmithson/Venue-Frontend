"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[882],{7882:(y,m,s)=>{s.r(m),s.d(m,{SettingsPage:()=>I});var e=s(3953),d=s(177),t=s(4341),r=s(367);class b{constructor(l){this.formBuilder=l,this.form=this.createForm()}createForm(){return this.formBuilder.group({firstName:["",[t.k0.required]],lastName:["",[t.k0.required]],email:["",[t.k0.required,t.k0.email]],phoneNumber:["",[t.k0.required,t.k0.minLength(10)]],password:["",[t.k0.required,t.k0.minLength(6)]],confirmPassword:["",[t.k0.required]]},{validator:this.passwordMatchValidator})}passwordMatchValidator(l){return l.controls.password.value===l.controls.confirmPassword.value?null:{mismatch:!0}}getForm(){return this.form}}var P=s(5251),N=s(3129),u=s(5873),k=s(5079),v=s(2490),w=s(8986);function F(n,l){1&n&&(e.j41(0,"ion-label",17),e.EFF(1,"Email is invalid"),e.k0s())}function S(n,l){1&n&&(e.j41(0,"ion-label",17),e.EFF(1,"Password is required to Update"),e.k0s())}function j(n,l){1&n&&(e.j41(0,"ion-label",17),e.EFF(1,"Password must be more than 6 characters"),e.k0s())}function U(n,l){1&n&&(e.j41(0,"ion-label",17),e.EFF(1,"Please re-enter password"),e.k0s())}function E(n,l){1&n&&(e.j41(0,"ion-label",17),e.EFF(1,"Passwords don't match."),e.k0s())}let I=(()=>{var n;class l{constructor(i,o,a){this.formBuilder=i,this.cookieService=o,this.route=a,this.form=t.gE,this.ProfileService=(0,e.WQX)(P.p),this.UiUxService=(0,e.WQX)(N.x)}ngOnInit(){(0,k.a)({moonOutline:u.CbK,sunnyOutline:u.M8s}),this.form=new b(this.formBuilder).createForm(),console.log(this.form),this.settingOption=Number(this.route.snapshot.queryParams.setting),this.UiUxService.getMyId({myCookie:this.cookieService.get("myCookie")}).subscribe(i=>{console.log(i),this.myId=i.userId,this.ProfileService.getProfileData({userId:this.myId}).subscribe(o=>{console.log(o),this.firstName=o[0].firstName,this.lastName=o[0].lastName,this.email=o[0].email,this.phoneNumber=o[0].phoneNumber,this.password=o[0].password})})}submitProfileUpdate(i){console.log(i),i.firstName=i.firstName?i.firstName:this.firstName,i.lastName=i.lastName?i.lastName:this.lastName,i.phoneNumber=i.phoneNumber?i.phoneNumber:this.phoneNumber,i.email=i.email?i.email:this.email,i.password=i.password==i.confirmPassword&&i.password.length>=6&&i.password?i.password:this.password,i.userId=this.myId,this.ProfileService.updateProfile({data:i}).subscribe(o=>{console.log(o)})}}return(n=l).\u0275fac=function(i){return new(i||n)(e.rXU(t.ok),e.rXU(v.O),e.rXU(w.nX))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-settings"]],standalone:!0,features:[e.aNF],decls:49,vars:17,consts:[["slot","start"],["color","success"],["slot","end",2,"margin-right","10px"],["id","main-content",1,"flex-center"],[1,"ion-padding",3,"ngSubmit","formGroup"],["formControlName","firstName","label","First Name","labelPlacement","stacked",3,"value"],["formControlName","lastName","label","Last Name","labelPlacement","stacked",3,"value"],["formControlName","email","label","Email","labelPlacement","stacked",3,"value"],["class","errorLabel","color","danger",4,"ngIf"],["maxLength","10","formControlName","phoneNumber","label","Phone Number","labelPlacement","stacked",3,"value"],["type","password","formControlName","password","label","Update Password","labelPlacement","stacked","placeholder","Enter New Password"],["type","password","formControlName","confirmPassword","label","Confirm Updated Password","labelPlacement","stacked","placeholder","Confirm New Password"],["color","danger","class","errorLabel",4,"ngIf"],["id","updateProf","type","submit","color","success","size","block",1,"ion-padding"],["trigger","updateProf","message","Profile Updated","color","success",2,"color","white","text-align","center","font-size","large",3,"duration"],[1,"ion-padding",2,"width","100%","height","100%"],["aria-label","Dark toggle","labelPlacement","start","color","dark",3,"checked"],["color","danger",1,"errorLabel"]],template:function(i,o){if(1&i&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.nrm(3,"ion-back-button",1),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Settings"),e.k0s(),e.j41(6,"ion-buttons",2),e.nrm(7,"ion-menu-button",1),e.k0s()()(),e.j41(8,"ion-content")(9,"div",3)(10,"ion-content")(11,"form",4),e.bIt("ngSubmit",function(){return o.submitProfileUpdate(o.form.value)}),e.j41(12,"ion-card")(13,"ion-card-header")(14,"ion-card-title",1),e.EFF(15,"Update Profile"),e.k0s()(),e.j41(16,"ion-card-content")(17,"ion-list")(18,"ion-item"),e.nrm(19,"ion-input",5),e.k0s(),e.j41(20,"ion-item"),e.nrm(21,"ion-input",6),e.k0s(),e.j41(22,"ion-item"),e.nrm(23,"ion-input",7),e.k0s(),e.DNE(24,F,2,0,"ion-label",8),e.j41(25,"ion-item"),e.nrm(26,"ion-input",9),e.k0s(),e.j41(27,"ion-item"),e.nrm(28,"ion-input",10),e.k0s(),e.DNE(29,S,2,0,"ion-label",8)(30,j,2,0,"ion-label",8),e.j41(31,"ion-item"),e.nrm(32,"ion-input",11),e.k0s(),e.DNE(33,U,2,0,"ion-label",8)(34,E,2,0,"ion-label",12),e.j41(35,"ion-button",13),e.EFF(36," Update Profile "),e.k0s(),e.nrm(37,"ion-toast",14),e.k0s()()()(),e.j41(38,"form",4),e.bIt("ngSubmit",function(){return o.submitProfileUpdate(o.form.value)}),e.j41(39,"ion-card")(40,"ion-card-header")(41,"ion-card-title",1),e.EFF(42,"Notification Settings"),e.k0s()(),e.j41(43,"ion-card-content")(44,"ion-list")(45,"ion-item")(46,"div",15)(47,"ion-toggle",16),e.EFF(48,"Allow Notifications"),e.k0s()()()()()()()()()()),2&i){let a,g,p,f,h;e.R7$(11),e.xc7("display",1===o.settingOption?"block":"none"),e.Y8G("formGroup",o.form),e.R7$(8),e.FS9("value",o.firstName),e.R7$(2),e.FS9("value",o.lastName),e.R7$(2),e.FS9("value",o.email),e.R7$(),e.Y8G("ngIf",o.form.get("email").touched&&(null==(a=o.form.get("email").errors)?null:a.email)),e.R7$(2),e.FS9("value",o.phoneNumber),e.R7$(3),e.Y8G("ngIf",o.form.get("password").touched&&(null==(g=o.form.get("password").errors)?null:g.required)),e.R7$(),e.Y8G("ngIf",o.form.get("password").touched&&(null==(p=o.form.get("password").errors)?null:p.minlength)),e.R7$(3),e.Y8G("ngIf",o.form.get("confirmPassword").touched&&(null==(f=o.form.get("confirmPassword").errors)?null:f.required)),e.R7$(),e.Y8G("ngIf",(null==o.form.errors?null:o.form.errors.mismatch)&&o.form.controls.confirmPassword.dirty&&!(null!=(h=o.form.get("confirmPassword").errors)&&h.required)),e.R7$(3),e.Y8G("duration",3e3),e.R7$(),e.xc7("display",2===o.settingOption?"block":"none"),e.Y8G("formGroup",o.form),e.R7$(9),e.Y8G("checked",!0)}},dependencies:[r.W9,r.eU,r.BC,r.ai,d.MD,d.bT,t.YN,t.qT,t.BC,t.cb,r.QW,r.el,r.nf,r.uz,t.X1,t.j4,t.JD,r.$w,r.b_,r.ME,r.tN,r.I9,r.Jm,r.BY,r.he,r.op,r.MC]}),l})()}}]);